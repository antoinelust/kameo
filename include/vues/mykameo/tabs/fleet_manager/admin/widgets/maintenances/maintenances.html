<div
  class="modal fade"
  id="maintenanceListing"
  tabindex="9"
  role="modal"
  aria-labelledby="modal-label"
  aria-hidden="true"
  style="display: none; overflow-y: auto !important"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-hidden="true"
        >
          ×
        </button>
      </div>
      <h4 class="fr-inline text-green" style="display: inline;">Entretiens:</h4><br>
      <a class="button small green button-3d rounded icon-right addMaintenance" data-target="#maintenanceManagementItem" data-toggle="modal" href="#">
        <i class="fa fa-plus"></i> Ajouter un entretien
      </a>
      <br>
      <div data-example-id="contextual-table" class="bs-example">
        <div class="col-sm-3">
          <div class="form-group">
            <label for="dtp_input3" class="control-label">Date de début</label>
            <div
              class="input-group date form_date_start_maintenance col-md-12"
              data-date=""
              data-date-format="dd/mm/yyyy"
              data-link-field="dtp_input3"
              data-link-format="yyyy-mm-dd"
            >
              <input
                class="form-control startDate"
                size="16"
                type="text"
                value=""
                readonly
              />
              <span class="input-group-addon"
                ><span class="glyphicon glyphicon-remove"></span
              ></span>
              <span class="input-group-addon"
                ><span class="glyphicon glyphicon-calendar"></span
              ></span>
            </div>
            <input type="hidden" id="dtp_input3" value="" /><br />
          </div>
        </div>
        <div class="col-sm-3">
          <div class="form-group">
            <label for="dtp_input4" class="control-label">Date de fin</label>
            <div
              class="input-group date form_date_end_maintenance col-md-12"
              data-date=""
              data-date-format="dd/mm/yyyy"
              data-link-field="dtp_input4"
              data-link-format="yyyy-mm-dd"
            >
              <input class="form-control endDate" size="16" type="text" value="" readonly>
              <span class="input-group-addon"
                ><span class="glyphicon glyphicon-remove"></span
              ></span>
              <span class="input-group-addon"
                ><span class="glyphicon glyphicon-calendar"></span
              ></span>
            </div>
            <input type="hidden" id="dtp_input4" value="" /><br />
          </div>
        </div>
        <table id="maintenanceListingSpan" class="row-border" style="width:100%"></table>
      </div>
      <div class="separator"></div>
      <div class="modal-footer">
        <button type="button" class="btn btn-b" data-dismiss="modal">
          Fermer
        </button>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">

  $(".form_date_start_maintenance").datetimepicker({
    language: "fr",
    weekStart: 1,
    todayBtn: 1,
    autoclose: 1,
    todayHighlight: 1,
    startView: 2,
    minView: 2,
    forceParse: 0,
  });

  var dateStart = $(".form_date_start_maintenance").data("datetimepicker").getDate();
  var dateStartString = ("0" + dateStart.getDate()).slice(-2) + "/" + ("0" + (dateStart.getMonth() + 1)).slice(-2) + "/" + dateStart.getFullYear();
  dateStart.setDate(dateStart.getDate() + 60);
  var dateEndString = ("0" + dateStart.getDate()).slice(-2) + "/" + ("0" + (dateStart.getMonth() + 1)).slice(-2) + "/" + dateStart.getFullYear();
  $('.startDate').val(dateStartString);
  $('.endDate').val(dateEndString);
  $(".form_date_end_maintenance").datetimepicker({
    language: "fr",
    weekStart: 1,
    todayBtn: 1,
    autoclose: 1,
    todayHighlight: 1,
    startView: 2,
    minView: 2,
    forceParse: 0,
    startDate: dateStartString,
  });
</script>
