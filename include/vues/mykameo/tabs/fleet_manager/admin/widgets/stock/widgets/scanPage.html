<!DOCTYPE html>
<html>
<body>
	<div class="modal fade" id="scanBarcodeModal" tabindex="9" role="modal" aria-labelledby="modal-label" aria-hidden="true" style="display: none; overflow-y: auto !important;">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				</div>

				<h4 class="text-green" id="scanTitle">Scannez Votre Produit pour ajouter la référence</h4>
				
				<div>
					<button  onclick="changeDisplay('scan')" class="button small green button-3d rounded icon-left" id="decodeBt">Scanner nouveau produit</button>

					<button  onclick="changeDisplay('add')" class="button small green button-3d rounded icon-left" id="addBt">Ajouter au stock</button>

					<button  onclick="changeDisplay('remove')" class="button small green button-3d rounded icon-left" id="removeBt">Enlever du stock</button>

					<button  onclick="changeDisplay('generateBill')" class="button small green button-3d rounded icon-left" id="billsGeneralBt">Facture Combiné</button>
					<button  onclick="changeDisplay('bills')" class="button small green button-3d rounded icon-left" id="billsBt">Facture entretien</button>
				</div>

				<button  class="button small green button-3d rounded icon-left" id="startButton">Start</button>
				<button  class="button small green button-3d rounded icon-left" id="stopButton">Stop</button>

				<div style="display:block ">
					<video id="video" width="70%" height="20%" style="border: 1px solid gray"></video>
				</div>

				<div class="col-sm-12" name="typeDiv" style="display:block;">			
					<label id="resultName" for="resultDisplay">Etat du scan :</label>
					<div class="col-sm-4">
						<label for="resultDisplay">Code-Barre : </label>
						<input class="form-control" readonly="readonly" name="resultDisplay" id="resultDisplay">
					</div>
					<div class="col-sm-4">
						<div id="sourceSelectPanel" style="display:none">
							<label for="sourceSelect">Changer de caméra :</label>
							<select id="sourceSelect" style="max-width:400px">
							</select>
						</div>
					</div>
				</div>

				<!-- ////////////////Affichage du scan produit -->
				<div id="displayScan" style="display:block ">
					<div class="col-sm-12">
						<form  name = "widget-stockScan-form" id="widget-stockScan-form" role="form" method="get" action="apis/Kameo/scannerForm.php">
							<div>
								<input readonly="readonly" name="result" id="result">
								<input hidden name="action">
							</div>
							<div class="col-sm-12">
								<div class="col-sm-4" name="typeDiv" style="display:block ">
									<label>Type : </label>
									<select name="type" class="form-control">
										<option disabled selected value>Choisissez le type</option>
										<option value="bike">Vélo</option>
										<option value="accessory">Accessoire</option>

									</select>
								</div>
								<div class="col-sm-4" name="brandDiv" style="display:block ">
									<label>Marque : </label>
									<select name="brand" class="form-control">
										<option disabled selected value>Choisissez la marque</option>
									</select>
								</div>
								<div class="col-sm-4" name="modelDiv" style="display:block ">
									<label>Model: </label>
									<select name="model" class="form-control">
									</select>
								</div>
								<div class="col-sm-4" name="categoryAccessoryDiv" style="display:block ">
									<label>Catégorie : </label>
									<select name="category" class="form-control">
									</select>
								</div>
								<div class="col-sm-4" name="modelBrandAccessoryDiv" style="display:block ">
									<label>Marque- Modèle : </label>
									<select name="accessory" class="form-control">
									</select>
								</div>
								<div class="col-sm-4" name="sizeDiv" style="display:block">
									<label>Taille : </label>
									<select name="size" class="form-control">
										<option disabled selected value>Choisissez la taille</option>
										<option value="XS">XS</option>
										<option value="S">S</option>
										<option value="M">M</option>
										<option value="L">L</option>
										<option value="XL">XL</option>
										<option value="Uni">Unique</option>
										<option value="ENF">Enfant</option>
									</select>
								</div>
								<div class="col-sm-4" name="colorDiv" style="display:block ">
									<label>Couleur: </label>
									<input name="color" class="form-control">
								</div>

							</div>
							<div class="col-sm-12" name="displayResultDiv" style="display:block " >

								<div class="col-sm-4" name="typeResultDiv" style="display:block ">
									<label>Type: </label>
									<input readonly="readonly" name="typeResult" class="form-control">
								</div>
								<div class="col-sm-4" name="brandResultDiv" style="display:block ">
									<label>Marque: </label>
									<input readonly="readonly" name="brandResult" class="form-control">
								</div>
								<div class="col-sm-4" name="modelResultDiv" style="display:block ">
									<label>Modèle: </label>
									<input readonly="readonly" name="modelResult" class="form-control">
								</div>
								<div class="col-sm-4" name="sizeResultDiv" style="display:block ">
									<label>Taille: </label>
									<input readonly="readonly" name="sizeResult" class="form-control">
								</div>
								<div class="col-sm-4" name="colorResultDiv" style="display:block ">
									<label>Couleur: </label>
									<input readonly="readonly" name="colorResult" class="form-control">
								</div>
								<div class="col-sm-4" name="categoryResultDiv" style="display:block ">
									<label>Categorie : </label>
									<input readonly="readonly" name="categoryResult" class="form-control">
								</div>

							</div>
							<br/>

							<button
							class="button small green button-3d rounded icon-left"
							type="submit"
							name="sendValue"
							>
							<i class="fa fa-paper-plane"></i>Envoyer
						</button>
					</form>
				</div>
			</div>
			<!-- //////////////// Fin Affichage du scan produit -->

			<div  id = "displayAdd" style="display:block ">
				<div class="col-sm-12">
					<div id="listOrderDiv" style="display:none ">
						<div class="col-sm-6" id="listOrderBikeDiv" style="display:none ">
							<label id="listOrderLabel" for="listOrder">Liste des Article en commande lié  :</label>
							<select name= "listOrder" id="listOrder" style="max-width:400px">
							</select>
							<input hidden name="frameReference" id="frameReference" value="">
						</div>
						<div id="listOrderAccessoryDiv" style="display:none ">
							<label id="listOrderLabel" >Liste des Article en commande lié  :</label>
							<form  name = "widget-stockBindAccessoryMultiple-form" id="widget-stockBindAccessoryMultiple-form" role="form" method="get" action="apis/Kameo/scannerForm.php">
								<table id="accessoryOrderToAdd" name="accessoryOrderToAdd" class="table" style='width: 100%;'></table>
								<input hidden name="action" value="bindAccessoriesMultiple">
								<button
								class="button small green button-3d rounded icon-left"
								type="submit"
								name="btBindAccessories">
								<i name ="btBindAccessoriesIm" class="fa fa-paper-plane"></i>Envoyer</button>
							</form>
						</div>
					</div>

				</div>
				<div class="col-sm-12" id ="bindArticleTooOrder" name ="bindArticleTooOrder">
					<a class="button small green button-3d rounded icon-right addFrameReference" data-target="#addFrameReferenceModal" id = "addFrameReferenceClick" data-toggle="modal" href="#">
						Ajouter une réference de cadre
					</a>
					<button onclick="bindArticle()" type="button" class="button small green button-3d rounded icon-left">Lier</button>
				</div>
			</div>


			<!-- //////////////// Fin Affichage d'ajout au stock -->
			<div  id = "displayRemove" style="display:block ">
				<form  name = "widget-stockScanRemove-form" id="widget-stockScanRemove-form" role="form" method="get" action="apis/Kameo/scannerForm.php">
					<div>
						<input readonly="readonly" name="result" id="result">
						<input hidden name="action">
						<input hidden name="typeArticle">
						<input hidden id="testDateToday" name="testDateToday" type="date">
						<input hidden id="testDateIn3years" name="testDateIn3years" type="date">
						<input hidden name="companyInternalReference">
					</div>
					<div class="col-sm-12">
						<div class="col-sm-4" name="listOrderTypeDiv" style="display:block ">
							<label> Choisir l'article : </label>
							<select name="listOrderType" class="form-control">
							</select>
						</div>
						<div class="col-sm-4" name="typeOutputDiv" style="display:block ">
							<label>Type : </label>
							<select name="typeOutput" class="form-control">
								<option disabled selected value="0">Choisissez le type de sortie</option>
								<option value="selling">Vente</option>
								<option value="leasing">Leasing</option>
							</select>
						</div>
						<div class="col-sm-4" name="orderCompanyDiv" style="display:block ">
							<label>Nom de la société : </label>
							<select name="orderCompany" class="form-control">
							</select>
						</div>
						<div class="col-sm-4" name="orderClientDiv" style="display:block ">
							<label>Nom de l'employé : </label>
							<select name="orderClient" class="form-control">
							</select>
						</div>

					</div>
					<div class="col-sm-12" name="displayPendingDiv" style="display:block " >
						<div class="col-sm-4" name="typePendingArticleDiv" style="display:block ">
							<label>Type d'article: </label>
							<input readonly="readonly" name="typePendingArticle" class="form-control">
						</div>
						<div class="col-sm-4" name="companyPendingDiv" style="display:block ">
							<label>Société : </label>
							<input readonly="readonly" name="companyPending" class="form-control">
						</div>
						<div class="col-sm-4" name="clientPendingDiv" style="display:block ">
							<label>Client : </label>
							<input readonly="readonly" name="clientPending" class="form-control">
						</div>
					</div>
					<br/>	
					<button
					class="button small green button-3d rounded icon-left"
					type="submit"
					name="sendValueToRemove">
					<i name ="btsendFormName" class="fa fa-paper-plane"></i>Faire sortir</button>
				</form>
			</div>
			<div id="displayGeneralBill" style="display:block ">
				<form  name = "widget-generateBill-form" id="widget-generateBill-form" role="form" method="get" action="">
					<div class="col-sm-12">
						<div class="col-sm-4" name="companyBillsDiv" style="display:block ">
							<label>Société : </label>
							<select name="companyBills" id="companyBills" class="form-control">
							</select>
						</div>
						<div class="col-sm-4" name="bikeBillsDiv">
							<label>Article Disponibles : </label>
							<select name="bikeBills" id="bikeBills" class="form-control">
							</select>	
						</div>
						<label name="listArticleBills"></label>
					</div>

				</form>
				<div class="col-sm-12" id="generateBillDiv"style="display:block ">
					<button
					onclick="generateBill()" class="button small green button-3d rounded icon-left" type="button">
					<i name ="btsendFormName" class="fa fa-paper-plane"></i>Générer la Facture
				</button>
			</div>
		</div>


		<div class="modal-footer">
			<button type="button" class="btn btn-b" data-dismiss="modal"><?= L::generic_close; ?></button>
		</div>
	</div>
</div>
</div>

<div
class="modal fade"
id="addFrameReferenceModal"
tabindex="-1"
role="modal"
aria-labelledby="modal-label"
aria-hidden="true"
style="display: none;"
>
<div class="modal-dialog modal-lg">
	<div class="modal-content">
		<div class="modal-header">
			<button
			type="button"
			class="close"
			data-dismiss="modal"
			aria-hidden="true"
			>
			×
		</button>
	</div>
	<div class="modal-body">
		<div class="row">
			<div class="col-md-12">
				<h4 class="text-green">Scanner une Référence de cadre</h4>
				<div style="display:block ">
					<video id="videoFrame" width="70%" height="20%" style="border: 1px solid gray"></video>
				</div>
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-b" data-dismiss="modal">
			Fermer
		</button>
	</div>
</div>
</div>
</div>
</body>
</html>
<script type="text/javascript">
	jQuery("#widget-stockScan-form").validate({
		submitHandler: function (form) {
			jQuery(form).ajaxSubmit({
				success: function (response) {
					if (response.response == "success") {
						$.notify(
						{
							message: response.message,
						},
						{
							type: "success",
						}
						);
						initializeModal();
						document.getElementById("widget-stockScan-form").reset();
					} else {
						$.notify(
						{
							message: response.message,
						},
						{
							type: "danger",
						}
						);
					}
				},
			});
		},
	});

	jQuery("#widget-stockScanRemove-form").validate({
		submitHandler: function (form) {
			jQuery(form).ajaxSubmit({
				success: function (response) {
					if (response.response == "success") {
						$.notify(
						{
							message: response.message,
						},
						{
							type: "success",
						}
						);
						if(response.type=='leasing'){
							
							document.getElementById("widget-stockScanRemove-form").reset();
							hideAllFromRemove(); 
						}
						else if (response.type=='selling'){
							create_Facture();
						}
					} else {
						$.notify(
						{
							message: response.message,
						},
						{
							type: "danger",
						}
						);
					}
				},
			});
		},
	});
	jQuery("#widget-stockBindAccessoryMultiple-form").validate({
		submitHandler: function (form) {
			jQuery(form).ajaxSubmit({
				success: function (response) {
					if (response.response == "success") {
						$.notify(
						{
							message: response.message,
						},
						{
							type: "success",
						}
						);
						document.getElementById("widget-stockBindAccessoryMultiple-form").reset();
						document.getElementById('listOrderDiv').style.display='none';
						document.getElementById('resultDisplay').value='';
					} else {
						$.notify(
						{
							message: response.message,
						},
						{
							type: "danger",
						}
						);
					}
				},
			});
		},
	});
</script>