<div class="modal fade" id="addUserAdmin" tabindex="-1" role="modal" aria-labelledby="modal-label" aria-hidden="true" style="z-index: 2000; display: none; overflow-y: auto !important;">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-sm-12">
						<h4 class="text-green"><?= L::generic_addUser; ?></h4>
						<form id="widget-addUserAdmin-form" action="apis/Kameo/add_user.php" role="form" method="post">
							<div class="form-group col-sm-12">
                <div class="row">
  								<div class="col-md-4">
  									<label for="firstname"><?= L::sidebar_first_name; ?></label>
  									<input type="text" name="firstName" class="form-control required">
  								</div>
  								<div class="col-md-4">
  									<label for="name"><?= L::sidebar_last_name; ?></label>
  									<input type="text" name="name" class="form-control required">
  								</div>
  								<div class="col-md-4">
  									<label for="mail" class="fr"><?= L::login_email; ?></label>
  									<input type="text" name="mail" class="form-control mail required">
  								</div>
                </div>
                <div class="row">
  								<div class="col-md-4">
  									<label for="phone"><?= L::sidebar_phone; ?></label>
  									<input type="text" name="phone" class="form-control phone required">
  								</div>
  								<div class="col-md-4">
  									<label for="generatePassword" class="text-center">Genérer un password automatiquement</label>
  									<input type="checkbox" name="generatePassword" class="form-control" checked>
  								</div>
  								<div class="col-md-4">
  									<label for="password" class="hidden"><?= L::sidebar_password; ?></label>
  									<input type="password" name="password" class="form-control required hidden" autocomplete="off">
  								</div>
                </div>
                <div class="row">
  								<div class="col-md-4">
                    <label for="fleetManager" class="text-center">Fleet manager</label>
  									<input type="checkbox" name="fleetManager" class="form-control">
  								</div>
                </div>
                <div class="row">
  								<div class="col-md-4">
  									<label for="sendMail" class="text-center"><?= L::generic_sendEmail; ?></label>
										<input type="checkbox" name="sendMail" class="form-control" checked>
  								</div>
                </div>
								<input type="text" name="requestor" class="form-control hidden" value="<?php echo $user_data['EMAIL']; ?>">
								<input type="text" name="company" class="form-control hidden">
							</div>
							<h4><?= L::generic_accessToBuildings; ?></h4>
							<div class="form-group col-sm-12" id="buildingCreateUserAdmin"></div>
							<h4><?= L::generic_accessToBikes; ?></h4>
							<div class="col-sm-12"><input type="checkbox" id="select-allAdmin" name="select_all" value="1" /> <strong><?= L::generic_selectAll; ?></strong></div>
							<div class="form-group col-sm-12" id="bikeCreateUserAdmin"></div>
							<button class="button small green button-3d rounded icon-left" type="submit"><i class="fa fa-paper-plane"></i><?= L::generic_send; ?></button>
						</form>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-b" data-dismiss="modal"><?= L::generic_close; ?></button>
			</div>
		</div>
	</div>
</div>
<script
  type="text/javascript"
  src="js/addons/jquery-datatables-checkboxes/js/dataTables.checkboxes.min.js"
></script>
<!--<script type="text/javascript" src="js/addons/tweetnacl/nacl-fast.min.js"></script>
<script type="text/javascript" src="js/addons/tweetnacl-util/nacl-util.min.js"></script>-->
<script type="text/javascript">
	$('#widget-addUserAdmin-form input[name=generatePassword]').change(function(){
	 if($('#widget-addUserAdmin-form input[name=generatePassword').is(':checked')){
		$('#widget-addUserAdmin-form label[for=password]').addClass("hidden");
		$('#widget-addUserAdmin-form input[name=password]').addClass("hidden");
	 }else{
		$('#widget-addUserAdmin-form label[for=password]').removeClass("hidden");
		$('#widget-addUserAdmin-form input[name=password]').removeClass("hidden");
	 }
	});
	jQuery("#widget-addUserAdmin-form").validate({
	 submitHandler: function(form) {
		jQuery(form).ajaxSubmit({
		 success: function(response) {
			if (response.response == 'success') {
			 $.notify({
				message: response.message
			 }, {
				type: 'success'
			 });
			 get_users_listing();
			 $('#addUserAdmin').modal('toggle');
			 document.getElementById('widget-addUserAdmin-form').reset();
			} else {
			 $.notify({
				message: response.message
			 }, {
				type: 'danger'
			 });
			}
		 }
		});
	 }
	});
</script>
