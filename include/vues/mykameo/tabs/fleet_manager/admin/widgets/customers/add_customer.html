<div
  class="modal fade"
  id="addClient"
  tabindex="-1"
  role="modal"
  aria-labelledby="modal-label"
  aria-hidden="true"
  style="display: none;"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-hidden="true"
        >
          ×
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-12">
            <h4 class="text-green">Ajouter un client</h4>
            <form
              id="widget-addClient-form"
              action="api/companies"
              role="form"
              method="post"
            >
              <div class="form-group">
                <h4 class="text-green">Description</h4>
                <div class="col-md-4">
                  <label for="internalReference">Référence interne</label>
                  <input
                    type="text"
                    class="form-control required"
                    name="internalReference"
                  />
                </div>
                <div class="col-md-4">
                  <label for="description">Nom de la société</label>
                  <input
                    type="text"
                    class="form-control required"
                    name="description"
                  />
                </div>
                <div class="col-md-4">
                  <label for="VAT">Numéro de TVA</label>
                  <input
                    type="text"
                    class="form-control "
                    name="VAT"
                  />
                </div>
                <div class="col-md-4">
                  <label for="type">Type</label>
                  <select
                    title="Type"
                    class="form-control required"
                    name="type"
                  >
                    <option value="CLIENT">Client</option>
                    <option value="PROSPECT" selected>Prospect</option>
                    <option value="ANCIEN PROSPECT">Ancien prospect</option>
                    <option value="ANCIEN CLIENT">Ancien client</option>
                    <option value="NOT INTERESTED">Pas intéressé</option>
                  </select>
                </div>
                <div class="col-md-4">
                  <label for="type">Audience</label>
                  <select
                    title="Audience"
                    class="form-control required"
                    name="audience"
                  >
                    <option value="B2B">Entreprise</option>
                    <option value="B2C">Particulier</option>
                  </select>
                </div>
                <div class="col-sm-6">
                  <label for="picture">Logo de la société (.jpg)</label>
                  <input type="hidden" name="MAX_FILE_SIZE" value="6291456" />
                  <input type="file" size="40" class="form-control" name="picture">
                </div>
                <div class="separator"></div>
                <h4 class="text-green">Adresse</h4>
                <div class="col-sm-4">
                  <label for="street">Rue :</label>
                  <input type="text" class="form-control" name="street">
                </div>
                <div class="col-sm-4">
                  <label for="zipCode">Code Postal</label>
                  <input type="text" class="form-control" name="zipCode">
                </div>
                <div class="col-sm-4">
                  <label for="city">Ville</label>
                  <input type="text" class="form-control" name="city">
                </div>
              </div>
              <input type="text" class="hidden required" name='action' value="addClient">
              <button class="button small green button-3d rounded icon-left" type="submit"><i class="fa fa-plus"></i>Ajouter</button>
            </form>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-b" data-dismiss="modal">
          Fermer
        </button>
      </div>
    </div>
  </div>
</div>
<!--<script type="text/javascript" src="js/addons/tweetnacl/nacl-fast.min.js"></script>
<script type="text/javascript" src="js/addons/tweetnacl-util/nacl-util.min.js"></script>-->
<script type="text/javascript">
  jQuery("#widget-addClient-form").validate({
    submitHandler: function (form) {
      jQuery(form).ajaxSubmit({
        success: function (response) {
          if (response.response == "success") {
            $.notify(
              {
                message: response.message,
              },
              {
                type: "success",
              }
            );
            document.getElementById("widget-addClient-form").reset();
            $("#addClient").modal("toggle");
            getCompaniesInMaintenances();
             $("#companyListingTable").dataTable().api().ajax.reload();
          } else {
            $.notify(
              {
                message: response.message,
              },
              {
                type: "danger",
              }
            );
          }
        },
      });
    },
  });
</script>
