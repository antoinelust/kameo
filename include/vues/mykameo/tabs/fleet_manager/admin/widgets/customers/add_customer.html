<div
  class="modal fade"
  id="addClient"
  tabindex="-1"
  role="modal"
  aria-labelledby="modal-label"
  aria-hidden="true"
  style="display: none"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-hidden="true"
        >
          ×
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-12">
            <h4 class="text-green">Ajouter un client</h4>
            <form
              id="widget-addClient-form"
              action="apis/Kameo/add_client.php"
              role="form"
              method="post"
            >
              <div class="form-group">
                <h4 class="text-green">Description</h4>
                <div class="col-md-4">
                  <label for="internalReference">Référence interne</label>
                  <input
                    type="text"
                    class="form-control required"
                    name="internalReference"
                  />
                </div>
                <div class="col-md-4">
                  <label for="description">Nom de la société</label>
                  <input
                    type="text"
                    class="form-control required"
                    name="description"
                  />
                </div>
                <div class="col-md-4">
                  <label for="VAT">Numéro de TVA</label>
                  <input
                    type="text"
                    class="form-control "
                    name="VAT"
                  />
                </div>
                <div class="col-md-4">
                  <label for="type">Type</label>
                  <select
                    title="Type"
                    class="form-control selectpicker"
                    name="type"
                  >
                    <option value="CLIENT">Client</option>
                    <option value="PROSPECT" selected>Prospect</option>
                    <option value="ANCIEN PROSPECT">Ancien prospect</option>
                    <option value="ANCIEN CLIENT">Ancien client</option>
                    <option value="NOT INTERESTED">Pas intéressé</option>
                  </select>
                </div>
                <div class="col-sm-6">
                  <label for="picture">Logo de la société (.jpg)</label>
                  <input type="hidden" name="MAX_FILE_SIZE" value="6291456" />
                  <input
                    type="file"
                    size="40"
                    class="form-control"
                    name="picture"
                  />
                </div>
                <div class="separator"></div>
                <h4 class="text-green">Adresse</h4>
                <div class="col-sm-4">
                  <label for="street">Rue :</label>
                  <input
                    type="text"
                    class="form-control"
                    name="street"
                  />
                </div>
                <div class="col-sm-4">
                  <label for="zipCode">Code Postal</label>
                  <input
                    type="text"
                    class="form-control"
                    name="zipCode"
                  />
                </div>
                <div class="col-sm-4">
                  <label for="city">Ville</label>
                  <input
                    type="text"
                    class="form-control"
                    name="city"
                  />
                </div>
                <div class="separator"></div>
                <h4 class="text-green">Personne de Contact</h4>
                <div class="col-md-3">
                  <label for="contactEmail">E-Mail</label>
                  <input
                    type="text"
                    name="contactEmail"
                    class="form-control required"
                  />
                </div>
                <div class="col-md-3">
                  <label for="firstName">Prénom</label>
                  <input
                    type="text"
                    name="firstName"
                    class="form-control required"
                  />
                </div>
                <div class="col-md-3">
                  <label for="lastName">Nom de Famille</label>
                  <input
                    type="text"
                    name="lastName"
                    class="form-control required"
                  />
                </div>
                <div class="col-md-3">
                  <label for="phone">Téléphone</label>
                  <input type="text" name="phone" class="form-control" />
                </div>
                <h4 class="text-green addClientTechnicalUser hidden">
                  Données techniques pour le premier utilisateur
                </h4>
                <div class="separator"></div>
                <div class="col-md-3">
                  <label
                    for="$firstNameInitialisation"
                    class="hidden addClientTechnicalUser"
                    >Prénom</label
                  >
                  <input
                    type="text"
                    class="form-control addClientTechnicalUser hidden"
                    name="firstNameInitialisation"
                  />
                </div>
                <div class="col-md-3">
                  <label
                    for="nameInitialisation"
                    class="addClientTechnicalUser hidden"
                    >Nom</label
                  >
                  <input
                    type="text"
                    class="form-control addClientTechnicalUser hidden"
                    name="nameInitialisation"
                  />
                </div>
                <div class="col-md-3">
                  <label
                    for="mailInitialisation"
                    class="addClientTechnicalUser hidden"
                    >Mail</label
                  >
                  <input
                    type="text"
                    class="form-control addClientTechnicalUser hidden"
                    name="mailInitialisation"
                  />
                </div>
                <div class="col-md-3">
                  <label
                    for="passwordInitialisation"
                    class="addClientTechnicalUser hidden"
                    >Mot de passe</label
                  >
                  <input
                    type="password"
                    autocomplete="off"
                    class="form-control addClientTechnicalUser hidden"
                    id="customer_password"
                    name="passwordInitialisation"
                  />
                </div>
                <input
                  type="text"
                  class="form-control hidden"
                  name="email"
                  value="<?php echo $user_data['EMAIL']; ?>"
                  hidden
                />
              </div>
              <div class="separator"></div>
              <button
                class="button small green button-3d rounded icon-left"
                type="submit"
              >
                <i class="fa fa-plus"></i>Ajouter
              </button>
            </form>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-b" data-dismiss="modal">
          Fermer
        </button>
      </div>
    </div>
  </div>
</div>
<!--<script type="text/javascript" src="js/addons/tweetnacl/nacl-fast.min.js"></script>
<script type="text/javascript" src="js/addons/tweetnacl-util/nacl-util.min.js"></script>-->
<script type="text/javascript">
  $("#widget-addClient-form select[name=type]").change(function () {
    if ($("#widget-addClient-form select[name=type]").val() == "CLIENT") {
      $(".addClientTechnicalUser").removeClass("hidden");
    } else {
      $(".addClientTechnicalUser").addClass("hidden");
    }
  });
  jQuery("#widget-addClient-form").submit(function () {
    document.getElementById("customer_password").value =
      /*nacl.util.encodeBase64(
		  nacl.hash(
			  nacl.util.decodeUTF8(*/
      document.getElementById("customer_password").value;
    /*)
		  )
	  )*/
    return true;
  });
  jQuery("#widget-addClient-form").validate({
    submitHandler: function (form) {
      jQuery(form).ajaxSubmit({
        success: function (response) {
          if (response.response == "success") {
            $.notify(
              {
                message: response.message,
              },
              {
                type: "success",
              }
            );
            $("#companyListingTable").dataTable().api().ajax.reload();
            document.getElementById("widget-addClient-form").reset();
            $("#addClient").modal("toggle");
          } else {
            $.notify(
              {
                message: response.message,
              },
              {
                type: "danger",
              }
            );
          }
        },
      });
    },
  });
</script>
