<div
class="modal fade"
id="orderManager"
tabindex="-1"
role="modal"
aria-labelledby="modal-label"
aria-hidden="true"
style="display: none; overflow-y: auto !important"
>
<div class="modal-dialog modal-lg">
  <div class="modal-content">
    <div class="modal-header">
      <button
      type="button"
      class="close"
      data-dismiss="modal"
      aria-hidden="true"
      >
      ×
    </button>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-sm-12">
        <form
        id="widget-order-form"
        action="apis/Kameo/orders_management.php"
        role="form"
        method="post"
        >
        <h4 class="text-green orderManagementTitle">Gestion de la commande client</h4>
        <div class="form-group col-sm-12">
          <div class="col-sm-12">
            <h4 class="text-green">Informations techniques</h4>
            <div class="col-sm-4" name="ID">
              <label for="portfolio">ID commande</label>
              <input
              type="text"
              name="ID"
              class="form-control required"
              readonly
              />
            </div>
            <div class="col-sm-4">
              <label for="status">Statut</label>
              <select name="status" class="form-control">
                <option value="new">Nouvelle demande</option>
                <option value="confirmed">Confirmée</option>
                <option value="closed">Terminée</option>
                <option value="cancelled">Annulée</option>
              </select>
            </div>

            <div class="col-sm-4">
              <label for="type">Type</label>
              <select name="type" class="form-control required">
                <option value="leasing">Leasing Mensuel</option>
                <option value="annualLeasing">Leasing Annuel</option>
                <option value="achat">Achat</option>
              </select>
            </div>
            <div class="col-sm-4">
              <label for="status">Montant</label>
              <input type="number" step="0.01" name="price" class="form-control required "/>
            </div>
          </div>
        </div>
        <div class="form-group col-sm-12">
          <h4 class="text-green">Caractéristiques du vélo</h4>
          <div class="col-sm-12">
            <div class="col-sm-12">
              <label for="portfolioID">ID Portfolio</label>
              <select name="portfolioID" class="form-control"></select>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="col-sm-4">
              <label for="brand">Marque</label>
              <input
              type="text"
              name="brand"
              class="form-control required"
              disabled
              />
            </div>
            <div class="col-sm-4">
              <label for="model">Modèle</label>
              <input
              type="text"
              name="model"
              class="form-control required"
              disabled
              />
            </div>
            <div class="col-sm-4">
              <label for="frameType">Type de cadre</label>
              <select name="frameType" class="form-control" disabled>
                <option value="H">Homme</option>
                <option value="M">Mixte</option>
                <option value="F">Femme</option>
              </select>
            </div>
            <div class="col-sm-4">
              <label for="size">Taille</label>
              <select name="size" class="form-control">
                <option value="XS">XS</option>
                <option value="S">S</option>
                <option value="M">M</option>
                <option value="L">L</option>
                <option value="XL">XL</option>
                <option value="Uni">Unique</option>
                <option value="enfant">Enfant</option>
              </select>
            </div>
            <img
            class="commandBike"
            width="200"
            title="vélo commandé"
            alt="vélo commandé"
            />
          </div>
        </div>
        <div class="form-group col-sm-12">
          <h4 class="text-green">Informations sur l'employé</h4>
          <div class="col-sm-12">
            <div class="col-sm-4" name="company">
              <label for="company">Compagnies</label>
              <select name="company" class="form-control">
              </select>
            </div>
            <div class="col-md-4">
              <label for="name" class="fr">Nom</label>
              <label for="name" class="en">Name</label>
              <label for="name" class="nl">Achternaam</label>
              <select name="name" class="form-control">
              </select>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="col-md-4">
              <label for="mail" class="fr">E-mail</label>
              <label for="mail" class="en">E-mail</label>
              <label for="mail" class="nl">E-mail</label>
              <input type="text" name="mail" class="form-control mail">
            </div>
            <div class="col-md-4">
              <label for="phone" class="fr">Numéro de téléphone</label>
              <label for="phone" class="en">Phone number</label>
              <label for="phone" class="nl">Phone number</label>
              <input type="text" name="phone" class="form-control phone">
            </div>
          </div>
        </div>
        <div class="form-group col-sm-12">
          <h4 class="text-green">Détails du test</h4>
          <div class="col-sm-12">
            <div class="col-sm-4">
              <label for="testBoolean">Besoin d'un test ?</label>
              <input
              type="checkbox"
              name="testBoolean"
              class="form-control"
              checked
              />
            </div>
            <div class="col-sm-4 testDate">
              <label for="testDate">Date du test</label>
              <input type="date" name="testDate" class="form-control" />
            </div>
            <div class="col-sm-4 testStatus">
              <label for="testStatus">Statut du test</label>
              <select name="testStatus">
                <option value="not started">Pas commencé</option>
                <option value="ongoing">En cours</option>
                <option value="closed">Terminée</option>
                <option value="cancelled">Annulée</option>
              </select>
            </div>
            <div class="col-sm-12 testAddress">
              <label for="testAddress">Adresse pour le test</label>
              <input
              type="text"
              name="testAddress"
              class="form-control"
              />
            </div>
            <div class="col-sm-12 testResult">
              <label for="testResult">Résultat du test</label>
              <textarea
              class="form-control"
              rows="5"
              name="testResult"
              ></textarea>
            </div>
          </div>
        </div>
        <div class="form-group col-sm-12">
          <h4 class="text-green">Détails de la livraison</h4>
          <div class="col-sm-12">
            <div class="col-sm-4">
              <label for="deliveryDate">Date de livraison estimée</label>
              <input
              type="date"
              name="deliveryDate"
              class="form-control"
              />
            </div>
            <div class="col-sm-4">
              <label for="deliveryAddress">Adresse de livraison</label>
              <input
              type="text"
              name="deliveryAddress"
              class="form-control"
              />
            </div>
          </div>
            <div class="col-sm-12">
              <label for="deliveryAddress">Commentaire </label>
             <textarea name="commentsAdmin" class="form-control">
              </textarea>
            </div>
            <input
            type="text"
            name="action"
            class="form-control hidden"
            value="update"
            />
            <input
            type="text"
            name="emailUser"
            class="form-control hidden"
            />
            <input
            type="text"
            name="email"
            disabled
            class="form-control hidden"
            value="<?php echo $user_data['EMAIL']; ?>"
            />
          </div>
        </div>
        <div class="form-group col-sm-12">
          <h4 class="text-green">Champs additionels</h4>
          <div class="col-sm-12">
            <div class="col-sm-12">
              <label for="comment">Commentaire du client</label>
              <textarea name="comment" rows="10" class="form-control" readonly>
              </textarea>
            </div>
          </div>
        </div>
        <div class="form-group col-sm-12" name="assignationBikeHide">
          <h4 class="text-green" >Assignation D'un vélo </h4>
          <div class="col-sm-12">
            <div class="col-sm-4" name="commandeVeloDiv">
              <label name="phraseNonAssignation"></label>
            </div>
            <div class="col-sm-4" name="assignVeloDiv">
              <button class="testAssignation button small green button-3d" name="commanderVelo" data-target="#bikeManagement" data-toggle ="modal" type="button"> Commander Pour cette commande</button>
          </div>
        </div>
      </div>
      <div class="separator"></div>
      <div class="form-group col-sm-12">
        <div class="row orderAccessories" id="orderAccessories">
          <div class="col-sm-4">
            <h4 class="text-green">Accessoires</h4>
          </div>
          <div class="col-sm-12 accessoriesButtons">
            <i class="fa fa-calculator"></i>
            <span class="accessoriesNumber">0</span
              ><input
              type="hidden"
              name="accessoriesNumber"
              value="0"
              />
              <button
              class="button small green button-3d rounded icon-right glyphicon glyphicon-plus"
              type="button"
              ></button>
              <button
              class="button small red button-3d rounded icon-right glyphicon glyphicon-minus"
              type="button"
              ></button>
            </div>
            <table class="table table-condensed tableFixed otherCostsAccesoiresTable" id="ExistingAccessory">
            <thead><tr><th>Categorie</th><th>Accessoire</th><th>Type</th><th>Prix d'Achat</th><th>Prix vente HTVA</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
      <div class="col-sm-12">
        <button
        class="button small green button-3d rounded icon-left"
        type="submit"
        >
        <i class="fa fa-paper-plane"></i>Envoyer
      </button>
    </div>
  </form>
</div>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-b" data-dismiss="modal">
    Fermer
  </button>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript">
  jQuery("#widget-order-form").validate({
    submitHandler: function (form) {
      jQuery(form).ajaxSubmit({
        success: function (response) {
          if (response.response == "success") {
            $.notify(
            {
              message: response.message,
            },
            {
              type: "success",
            }
            );
            get_orders_listing();
            $("#orderManager").modal("toggle");
            document.getElementById("widget-order-form").reset();
          } else {
            $.notify(
            {
              message: response.message,
            },
            {
              type: "danger",
            }
            );
          }
        },
      });
    },
  });
</script>
