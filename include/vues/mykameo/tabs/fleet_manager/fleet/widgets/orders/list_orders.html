<div class="modal fade" id="ordersListingFleet" tabindex="9" role="modal" aria-labelledby="modal-label" aria-hidden="true" style="display: none; overflow-y: auto !important;">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			</div>
			<h4 class="text-green"><?= L::widgetTitle_ordersManager; ?></h4>
			<div data-example-id="contextual-table" class="bs-example">
				<table id="ordersFleetListingTable" data-order='[[ 0, \"asc\" ]]' data-page-length='25' class="table table-condensed">
					<thead>
						<tr>
							<th>ID</th>
							<th><?= L::generic_user; ?></th>
							<th><?= L::generic_bike; ?></th>
							<th><?= L::generic_size; ?></th>
							<th><?= L::generic_amount; ?></th>
							<th><?= L::generic_status; ?></th>
							<th></th>
						</tr>
					</thead>
					<tbody id='ordersFleetListingSpan'>
					</tbody>
				</table>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-b" data-dismiss="modal"><?= L::generic_close; ?></button>
			</div>
		</div>
	</div>
</div>


<div class="modal fade" id="orderManagerFleet" tabindex="-1" role="modal" aria-labelledby="modal-label" aria-hidden="true" style="display: none;">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-sm-12">
						<form id="widget-orderFleet-form" action="apis/Kameo/orders_management.php" role="form" method="post">
                          <fieldset disabled>
							<h4 class="text-green"><?= L::orders_title; ?></h4>
							<div class="form-group col-sm-12">
								<h4 class="text-green"><?= L::generic_technicalInformation; ?></h4>
								<div class="row">
									<div class="col-sm-4">
										<label for="ID">ID</label>
										<input type="text" name="ID" class="form-control required" readonly>
									</div>
									<div class="col-sm-6">
										<h4 class="text-green"><?= L::generic_status; ?></h4>
										<select name="status" class="form-control">
											<option value="new"><?= L::status_new_command; ?></option>
											<option value="confirmed"><?= L::status_confirmed_command; ?></option>
											<option value="refused"><?= L::status_waiting_delivery; ?></option>
										</select>
									</div>
								</div>
							</div>
							<div class="form-group col-sm-12">
								<h4 class="text-green"><?= L::generic_bikeCharacteristics; ?></h4>
								<div class="row">
									<div class="col-sm-4">
										<label for="brand"><?= L::generic_brand; ?></label>
										<input type="text" name="brand" class="form-control required" disabled>
									</div>
									<div class="col-sm-4">
										<label for="model"><?= L::generic_model; ?></label>
										<input type="text" name="model" class="form-control required" disabled>
									</div>
									<div class="col-sm-4">
										<label for="frameType"><?= L::generic_frameType; ?></label>
										<select name="frameType" class="form-control" disabled>
											<option value="H"><?= L::generic_man; ?></option>
											<option value="M"><?= L::generic_mixt; ?></option>
											<option value="F"><?= L::generic_woman; ?></option>
										</select>
									</div>
									<div class="col-sm-4">
										<label for="size"><?= L::generic_size; ?></label>
										<select name="size" class="form-control">
											<option value="XS">XS</option>
											<option value="S">S</option>
											<option value="M">M</option>
											<option value="L">L</option>
											<option value="XL">XL</option>
										</select>
									</div>
									<img class="commandBike" width="200" title="vélo commandé" alt="vélo commandé"/>
								</div>
							</div>
							<div class="form-group col-sm-12">
								<h4 class="text-green"><?= L::generic_userInformation; ?></h4>
								<div class="col-sm-4">
									<label for="firstname"><?= L::sidebar_first_name; ?></label>
									<input type="text" name="firstName" class="form-control required">
								</div>
								<div class="col-sm-4">
									<label for="name"><?= L::sidebar_last_name; ?></label>
									<input type="text" name="name" class="form-control required">
								</div>
								<div class="col-sm-4">
									<label for="mail">E-mail</label>
									<input type="text" name="mail" class="form-control mail required">
								</div>
								<div class="col-sm-4">
									<label for="phone"><?= L::sidebar_phone; ?></label>
									<input type="text" name="phone" class="form-control phone">
								</div>
							</div>
							<div class="form-group col-sm-12">
								<h4 class="text-green"><?= L::generic_billing; ?></h4>
	                <div class="col-sm-4">
	                    <label for="retailPrice"><?= L::generic_retailPriceTVAC; ?></label>
	                    <input type="text" name="retailPrice" class="form-control required" disabled>
	                </div>
									<div class="col-sm-4">
                    <label for="type"><?= L::leasingType_title; ?></label>
										<select name="type" class="form-control required">
											<option value="leasing"><?= L::leasingType_monthlyLeasing; ?></option>
											<option value="annualLeasing"><?= L::leasingType_annualLeasing; ?></option>
											<option value="achat"><?= L::leasingType_buying; ?></option>
										</select>
	                </div>
									<div class="col-sm-4">
                    <label for="model"><?= L::leasingType_amountLeasing; ?></label>
                    <input type="text" name="price" class="form-control required" disabled>
	                </div>
	            </div>
	            </fieldset>

	            <div class="col-sm-12">
	                <a class="button small red-dark button-3d rounded icon-right\" ID="initializeRefuseCommandButton"><span><?= L::generic_refuse; ?></span></a>
	                <button  class="button small green button-3d rounded icon-left" ID="confirmCommandButton" name="validationComand" type="submit"><i class="fa fa-paper-plane"></i><?= L::generic_confirm; ?></button>
	            </div>

	            <input type="text" name="action" class="hidden" value="confirmCommand">

						</form>
						<form id="widget-refuseCommand-form" class="hidden" action="apis/Kameo/orders_management.php" role="form" method="post">
                <h4 class="text-green"><?= L::leasingType_refusalReason; ?></h4>
                <textarea type="text" name="reasonOfRefusal" rows="5" class="form-control required" placeholder="Votre message"></textarea>
                <input type="text" name="action" class="hidden" value="refuse">
                <input type="text" name="ID" ID="ID" class="hidden" value="refuse">
                <button  class="button small green button-3d rounded icon-left" name="validationComand" type="submit"><i class="fa fa-paper-plane"></i><?= L::generic_confirm; ?></button>
            </form>

					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-b" data-dismiss="modal"><?= L::generic_close; ?></button>
				</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
    jQuery("#widget-orderFleet-form").validate({
		submitHandler: function(form) {
			jQuery(form).ajaxSubmit({
				success: function(response) {
					if (response.response == 'success') {
						$.notify({
							message: response.message
						}, {
							type: 'success'
						});
						get_orders_fleet_listing();
						$('#orderManagerFleet').modal('toggle');
						document.getElementById('widget-orderFleet-form').reset();
					} else {
						$.notify({
							message: response.message
						}, {
							type: 'danger'
						});
					}
				}
			});
		}
    });
    jQuery("#widget-refuseCommand-form").validate({
		submitHandler: function(form) {
			jQuery(form).ajaxSubmit({
				success: function(response) {
					if (response.response == 'success') {
						$.notify({
							message: response.message
						}, {
							type: 'success'
						});
						get_orders_fleet_listing();
						$('#orderManagerFleet').modal('toggle');
						document.getElementById('widget-orderFleet-form').reset();

                          var element = document.getElementById("widget-refuseCommand-form");
                          element.classList.add("hidden");

                          var element = document.getElementById("initializeRefuseCommandButton");
                          element.classList.remove("hidden");

                          var element = document.getElementById("confirmCommandButton");
                          element.classList.remove("hidden");



					} else {
						$.notify({
							message: response.message
						}, {
							type: 'danger'
						});
					}
				}
			});
		}
    });
</script>
