<div class="modal fade" id="companyConditions" tabindex="9" role="modal" aria-labelledby="modal-label" aria-hidden="true" style="display: none;">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-sm-12">
						<h4 class="text-green">Modifier les réglages des réservations :</h4>
						<br>
						<br>
					</div>
						<form id="widget-updateCompanyConditions-form" class="form-inline" action="api/companies" role="form" method="post">
							<div class="col-sm-12">
							<span> <strong>Nom du groupe : </strong></span>
							<input type="text" name="name" class="form-control required" style="width: 20em;"><br/><br/>
							<input type="checkbox" name="booking" class="form-control"><label for="booking"> Réservation de vélos partagés ?</label>
							<br>
							<div class="booking hidden">
									<label for="daysInAdvance"> Durée maximale avant prochaine réservation (jours) : </label>
									<input type="number" class="form-control required" name="daysInAdvance" style="width: 7em;"><br/><br/>
									<label for="bookingLength"> Durée maximale d'une réservation (heures) : </label>
									<input type="number" class="form-control required" name="bookingLength" style="width: 7em;"><br/><br/>
									<label for="bookingsPerYear"> Nombre maximum de réservations par an (9999 pour illimité): </label>
									<input type="number" class="form-control required" name="bookingsPerYear" max="9999" style="width: 7em;"><br/><br/>
									<label for="bookingsPerMonth"> Nombre maximum de réservations par mois (9999 pour illimité): </label>
									<input type="number" class="form-control required" name="bookingsPerMonth" max="9999" style="width: 7em;"><br/><br/>
									<label for="minutesBeforeCancellation"> Nombre de minutes avant annulation automatique : </label>
									<input type="number" class="form-control required" name="minutesBeforeCancellation" min='0' max="9999" style="width: 7em;"><br/><br/>
									<div class="col-sm-12">
										<div class="col-sm-6 jumbotron jumbotron-border">
											<h4>Réglages de début de réservation</h4>
											<div class="col-sm-12">
												<p><label for="startIntakeBooking"> Première heure possible pour prendre un vélo : </label>
													<input type="number" class="form-control required" name="startIntakeBooking" max="23" style="width: 7em;">
												<p>
											</div>
											<div class="col-sm-12">
												<p><label for="endIntakeBooking"> Dernière heure possible afin de prendre un vélo : </label>
													<input type="number" class="form-control required" name="endIntakeBooking" max="23" style="width: 7em;">
												</p>
											</div>
											<div class="col-sm-12">
												<h5>Début de réservation possible aux jours suivants:</h5>
												<span class="intakeBookingDays"></span>
											</div>
										</div>
										<div class="col-sm-6 jumbotron jumbotron-border">
											<h4>Réglages de fin de réservation</h4>
											<div class="col-sm-12">
												<p><label for="startDepositBooking"> Première heure possible pour rendre un vélo : </label>
													<input type="number" class="form-control required" name="startDepositBooking" max="23" style="width: 7em;">
												<p>
											</div>
											<div class="col-sm-12">
												<p><label for="endDepositBooking"> Dernière heure possible afin de rendre un vélo : </label>
													<input type="number" class="form-control required" name="endDepositBooking" max="23" style="width: 7em;">
												</p>
											</div>
											<div class="col-sm-10">
												<h5>Fin de réservation possible aux jours suivants:</h5>
												<span class="depositBookingDays"></span>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="col-sm-12">
								<h4 class="text-green">Conditions spécifiques</h4>
									<label for="booking">Génération de code de réservation ?</label><br>
									<input type="checkbox" name="box" class="form-control"><br>
							</div>

							<div class="col-sm-12">
								<h4 class="text-green">Accès des utilisateurs à ce groupe de conditions</h4>
								<p class="text-red">Attention, attribuer un utilisateur à ce groupe supprimera automatiquement son appartenance à un autre groupe</p>
								<span id="groupConditionUsers"></span>
							</div>
							<button  class="fr button small green button-3d rounded icon-left" type="submit"><i class="fa fa-paper-plane"></i><?= L::generic_send; ?></button>
							<input type="text" name="email" value="<?php echo $user_data['EMAIL']; ?>" hidden>
							<input type="text" name="id" value="" hidden>
							<input type="text" name="action" value='updateCompanyConditions' hidden>
						</form>
				</div>
			</div>
			<div class="fr" class="modal-footer">
				<button type="button" class="btn btn-b" data-dismiss="modal"><?= L::generic_close; ?></button>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	jQuery("#widget-updateCompanyConditions-form").validate({
		submitHandler: function(form){
			jQuery(form).ajaxSubmit({
				success: function(response) {
					if (response.response == 'success') {
						$.notify({
						message: response.message
						}, {
						type: 'success'
						});
						$('#companyConditions').modal('toggle');
						list_condition();
					} else {
						$.notify({
						message: response.message
						}, {
						type: 'danger'
						});
					}
				}
			});
		}
	});
</script>
